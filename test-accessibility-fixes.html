<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessibility Test - Circle of Fifths</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        body {
            padding: 2rem;
            font-family: var(--font-family);
        }
        .test-section {
            margin: 2rem 0;
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
        }
        .test-section h2 {
            color: var(--primary-color);
            margin-top: 0;
        }
        .color-test {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1rem 0;
        }
        .color-sample {
            padding: 1rem;
            border-radius: var(--radius-sm);
            min-width: 150px;
        }
    </style>
</head>
<body>
    <h1>Accessibility Fixes Test Page</h1>
    
    <div class="test-section">
        <h2>Text Contrast Tests</h2>
        
        <div class="color-test">
            <div class="color-sample" style="background: var(--background-color); color: var(--text-primary);">
                <strong>Primary Text</strong><br>
                This should have high contrast
            </div>
            
            <div class="color-sample" style="background: var(--background-color); color: var(--text-secondary);">
                <strong>Secondary Text (Fixed)</strong><br>
                This should now meet WCAG AA standards
            </div>
            
            <div class="color-sample" style="background: var(--surface-color); color: var(--text-muted);">
                <strong>Muted Text (Fixed)</strong><br>
                This should have improved contrast
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Button Contrast Tests</h2>

        <div class="audio-controls">
            <button class="audio-btn" id="play-scale">
                <span class="btn-icon">‚ñ∂Ô∏è</span>
                Play Scale
            </button>
            <button class="audio-btn" id="play-chord">
                <span class="btn-icon">üéµ</span>
                Play Chord
            </button>
            <button class="audio-btn stop-btn" id="stop-audio">
                <span class="btn-icon">‚èπÔ∏è</span>
                Stop
            </button>
        </div>

        <div class="mode-toggle" style="margin-top: 1rem;">
            <button id="major-mode" class="mode-btn active">Major</button>
            <button id="minor-mode" class="mode-btn">Minor</button>
        </div>

        <div class="difficulty-toggle" style="margin-top: 1rem;">
            <button id="beginner-level" class="difficulty-btn active">Beginner</button>
            <button id="advanced-level" class="difficulty-btn">Advanced</button>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Related Keys Tests</h2>
        
        <div class="related-keys">
            <div class="related-key" data-relationship="dominant">
                <span data-relationship="dominant">Dominant: G Major</span>
            </div>
            <div class="related-key" data-relationship="subdominant">
                <span data-relationship="subdominant">Subdominant: F Major</span>
            </div>
            <div class="related-key" data-relationship="relative">
                <span data-relationship="relative">Relative: A Minor</span>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>SVG Interactive Test</h2>
        
        <div class="circle-container">
            <svg
                id="circle-svg"
                class="circle-svg"
                viewBox="0 0 400 400"
                xmlns="http://www.w3.org/2000/svg"
                role="application"
                aria-labelledby="test-circle-title"
                style="max-width: 300px;"
            >
                <title id="test-circle-title">Test Circle of Fifths</title>
                
                <!-- Sample key segment -->
                <g class="key-segment" data-key="C" role="button" tabindex="0" aria-label="C Major">
                    <path class="segment-path major" d="M 200 50 L 250 70 A 150 150 0 0 1 280 120 L 230 100 A 100 100 0 0 0 200 50 Z" />
                    <text class="key-text" x="240" y="85" text-anchor="middle">C</text>
                </g>
                
                <g class="key-segment" data-key="G" role="button" tabindex="0" aria-label="G Major">
                    <path class="segment-path major" d="M 280 120 L 330 140 A 150 150 0 0 1 360 190 L 310 170 A 100 100 0 0 0 280 120 Z" />
                    <text class="key-text" x="320" y="155" text-anchor="middle">G</text>
                </g>
            </svg>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Loading Text Test</h2>
        <div class="loading">
            <div class="loading-spinner"></div>
            <p class="loading-text">Loading audio system...</p>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Theme Toggle Test</h2>
        <div class="theme-toggle">
            <button class="theme-btn" data-theme="light">
                <span class="theme-icon">‚òÄÔ∏è</span>
                <span class="theme-text">Light</span>
            </button>
            <button class="theme-btn" data-theme="dark">
                <span class="theme-icon">üåô</span>
                <span class="theme-text">Dark</span>
            </button>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Footer Test</h2>
        <div class="footer" style="margin: 1rem 0; padding: 1rem; border-radius: var(--radius-md);">
            <p class="footer-text">Interactive Circle of Fifths - Learn music theory through exploration</p>
            <p class="footer-credits">Built with Web Audio API and modern web technologies</p>
            <a href="#main-content" class="skip-link" style="position: static; top: auto;">Skip to main content</a>
        </div>
    </div>

    <div class="test-section">
        <h2>Instructions</h2>
        <p>Test this page with:</p>
        <ol>
            <li>Run <code>axe http://localhost:8000/test-accessibility-fixes.html</code></li>
            <li>Check keyboard navigation (Tab through elements)</li>
            <li>Test with screen readers</li>
            <li>Verify color contrast meets WCAG AA standards</li>
        </ol>
    </div>
    
    <script>
        // Add basic interactivity for testing
        document.querySelectorAll('.key-segment').forEach(segment => {
            segment.addEventListener('click', () => {
                console.log('Key selected:', segment.getAttribute('data-key'));
            });
            
            segment.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    segment.click();
                }
            });
        });
        
        document.querySelectorAll('.audio-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                console.log('Button clicked:', btn.textContent.trim());
            });
        });
    </script>
</body>
</html>
