<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Theme Testing - Circle of Fifths</title>
        <link rel="stylesheet" href="css/styles.css" />
        <style>
            .test-container {
                padding: 20px;
                margin: 20px;
                background: var(--surface-color);
                border: 1px solid var(--border-color);
                border-radius: var(--radius-md);
            }
            .test-section {
                margin: 10px 0;
                padding: 10px;
                border-radius: var(--radius-sm);
            }
            .color-sample {
                display: inline-block;
                width: 30px;
                height: 30px;
                margin: 5px;
                border-radius: var(--radius-sm);
                border: 1px solid var(--border-color);
            }
            .major-sample {
                background: var(--major-color);
            }
            .minor-sample {
                background: var(--minor-color);
            }
            .dominant-sample {
                background: var(--dominant-color);
            }
            .subdominant-sample {
                background: var(--subdominant-color);
            }
            .relative-sample {
                background: var(--relative-color);
            }
            .primary-sample {
                background: var(--primary-color);
            }
            .secondary-sample {
                background: var(--secondary-color);
            }
            .surface-sample {
                background: var(--surface-color);
                border: 2px solid var(--border-color);
            }
            .background-sample {
                background: var(--background-color);
                border: 2px solid var(--border-color);
            }

            .related-key-test {
                margin: 5px 0;
                padding: 8px;
                border-radius: var(--radius-sm);
            }
            .related-key-test.dominant {
                background: var(--dominant-bg);
                color: var(--dominant-color);
                border: 1px solid var(--dominant-border);
            }
            .related-key-test.subdominant {
                background: var(--subdominant-bg);
                color: var(--subdominant-color);
                border: 1px solid var(--subdominant-border);
            }
            .related-key-test.relative {
                background: var(--relative-bg);
                color: var(--relative-color);
                border: 1px solid var(--relative-border);
            }

            .theme-info {
                font-family: monospace;
                font-size: 12px;
                color: var(--text-secondary);
                margin: 10px 0;
            }
        </style>
    </head>
    <body>
        <div class="test-container">
            <h1 style="color: var(--primary-color)">Theme Testing Dashboard</h1>

            <div class="test-section">
                <h2 style="color: var(--text-primary)">Current Theme</h2>
                <div class="theme-info" id="theme-info">Loading...</div>
            </div>

            <div class="test-section">
                <h3 style="color: var(--text-primary)">Theme Controls</h3>
                <button
                    onclick="setTheme('light')"
                    style="
                        margin: 5px;
                        padding: 8px 16px;
                        background: var(--surface-color);
                        color: var(--text-primary);
                        border: 1px solid var(--border-color);
                        border-radius: var(--radius-sm);
                    "
                >
                    Light Theme
                </button>
                <button
                    onclick="setTheme('dark')"
                    style="
                        margin: 5px;
                        padding: 8px 16px;
                        background: var(--surface-color);
                        color: var(--text-primary);
                        border: 1px solid var(--border-color);
                        border-radius: var(--radius-sm);
                    "
                >
                    Dark Theme
                </button>
                <button
                    onclick="setTheme('system')"
                    style="
                        margin: 5px;
                        padding: 8px 16px;
                        background: var(--surface-color);
                        color: var(--text-primary);
                        border: 1px solid var(--border-color);
                        border-radius: var(--radius-sm);
                    "
                >
                    System Theme
                </button>
            </div>

            <div class="test-section">
                <h3 style="color: var(--text-primary)">Color Samples</h3>
                <div>
                    <span class="color-sample primary-sample" title="Primary"></span>
                    <span class="color-sample secondary-sample" title="Secondary"></span>
                    <span class="color-sample surface-sample" title="Surface"></span>
                    <span class="color-sample background-sample" title="Background"></span>
                </div>
                <div>
                    <span class="color-sample major-sample" title="Major"></span>
                    <span class="color-sample minor-sample" title="Minor"></span>
                    <span class="color-sample dominant-sample" title="Dominant"></span>
                    <span class="color-sample subdominant-sample" title="Subdominant"></span>
                    <span class="color-sample relative-sample" title="Relative"></span>
                </div>
            </div>

            <div class="test-section">
                <h3 style="color: var(--text-primary)">Related Keys (Alpha Backgrounds)</h3>
                <div class="related-key-test dominant">
                    Dominant Key (should have themed background)
                </div>
                <div class="related-key-test subdominant">
                    Subdominant Key (should have themed background)
                </div>
                <div class="related-key-test relative">
                    Relative Key (should have themed background)
                </div>
            </div>

            <div class="test-section">
                <h3 style="color: var(--text-primary)">SVG Test</h3>
                <svg width="200" height="100" style="border: 1px solid var(--border-color)">
                    <rect class="segment-path major" x="10" y="10" width="30" height="30" />
                    <rect class="segment-path minor" x="50" y="10" width="30" height="30" />
                    <rect class="segment-path selected" x="90" y="10" width="30" height="30" />
                    <rect class="segment-path dominant" x="130" y="10" width="30" height="30" />
                    <text class="key-text" x="25" y="60" text-anchor="middle">M</text>
                    <text class="key-text" x="65" y="60" text-anchor="middle">m</text>
                    <text class="key-text" x="105" y="60" text-anchor="middle">S</text>
                    <text class="key-text" x="145" y="60" text-anchor="middle">D</text>
                </svg>
            </div>
        </div>

        <script src="js/themeManager.js"></script>
        <script>
            let themeManager;

            function initTest() {
                themeManager = new ThemeManager();
                updateThemeInfo();

                // Listen for theme changes
                document.addEventListener('themeChanged', updateThemeInfo);
            }

            function setTheme(theme) {
                if (themeManager) {
                    themeManager.setTheme(theme);
                }
            }

            function updateThemeInfo() {
                const info = document.getElementById('theme-info');
                if (themeManager && info) {
                    const currentTheme = themeManager.getCurrentTheme();
                    const effectiveTheme = themeManager.getEffectiveTheme();
                    const dataTheme = document.documentElement.getAttribute('data-theme');

                    info.innerHTML = `
                    Current Theme: ${currentTheme}<br>
                    Effective Theme: ${effectiveTheme}<br>
                    HTML data-theme: ${dataTheme}<br>
                    System Preference: ${themeManager.getSystemTheme()}
                `;
                }
            }

            // Initialize when page loads
            document.addEventListener('DOMContentLoaded', initTest);
        </script>
    </body>
</html>
